# Events-Vkontakte

Мероприятия вконтакте

http://localhost:8085/swagger-ui.html

<h2>Описание проекта "Мероприятия вконтакте"</h2>
<h1>ВАЖНО!</h1>
Первичный запуск приложения занимает около 30 минут, заполняется БД 

- [Про что проект (кратко)](#summary)
- [Про что проект (что бы понятно)](#summary-long)
- [Stack](#stack)
- [Backlog](#backlog)
  - [Структура проекта](#project-structure)
    - [фронт](#front)
    - [Бэкенд](#back)
- [Что уже реализованно](#done)


### Summary

Проект собирает и хранит, мероприятия вконтакте в базе.

Выдает мероприятия по параметрам, в том числе по дате, чего нельзя делать Вконтакте


### summary-long

Что такое [мероприятия вконтакте](https://postium.ru/kak-sozdat-i-oformit-meropriyatie-vkontakte/)?
В чем проблема, есть же поиск?

* поиск мероприятий можно осуществить, только по городу и ключу, [пример](https://vk.com/groups?act=catalog&c%5Bcity%5D=1&c%5Bnot_safe%5D=1&c%5Bper_page%5D=40&c%5Bsection%5D=communities&c%5Bskip_catalog%5D=1&c%5Btype%5D=3).
* найти мероприятие на определенную дату тот еще геморрой.
* за раз можно забрать не больше 1000 мероприятий и сдвиг(offset) не работает.
* через API VK можно искать только по городу и поисковому запросу, при чем работает он крайне странно.

Пару лет назад мне, это было нужно и я написал скрипт на Python вот [результат](https://vk.com/all_event_vk_msk).

Так в чем же идея проекта? Возможность получать мероприятия по городу и по ДАТЕ. 
Какие еще есть проблемы:

* куча клонов мероприятий
* ограничения API VK их много, но есть идея решения авторизация пользователей через вк и получение access_token.
* поиск через API работает крайне странно можно протестировать [тут](https://dev.vk.com/ru/method/groups.search). 
Попробуй ввести например а, аа, ааа и будет понятно о чем я.
* еще хочется прикрутить фильтр, всяких гадалок, гуру успешного успеха, шаманов и прочего волшебства.

Какие будут блоки:

* админка - управление пользователями. - работает, фронт надо переводить на JS
* модуль сбора мероприятий в базу.
* модуль инициализации - заполнение базы данных странами и городами вконтакте. - готов
* модуль постинга мероприятий вконтакте в группы вконтакте.
* фронт, админка и выборка мероприятий.
 кстати по ходу дела нашел кривую [реализацию](https://vkevent.ru).

### Stack

Проект пишется на базе `Java 17`, `Spring Boot`, `Maven` пока на архитектуре WEBMVC в планах переехать на REST архитектуру и JS для фронта.
Совсем в далеких планах перевести проект на микросервисную архитектуру.

Чтобы не писать boilerplate-код, на проекте используется [Lombok](https://projectlombok.org/features/all).

Все контроллеры и их методы нужно сразу описывать аннотациями [Swagger](https://docs.swagger.io/swagger-core/v1.5.0/apidocs/allclasses-noframe.html).
Swagger UI при запущенном приложении крутится [здесь](http://localhost:8085/swagger-ui.html).

* FlyWay - Первоначальное заполнение БД
* Docker - Окружение
* Actuator - End points живости приложения
* Swagger UI - Документация и мгновенное тестирование контроллеров
* Postgres - ДБ
* Prometheus - Метрики
* SDK Api Vk - библиотека для работы с API Вконтакте
* Grafana - Рисует из метрик красивые графики
* Spring Data JPA - для общения с базой
* Lombok - Сокращение boilerplate-кода
* Spring Security - Аутентификация по логину, паролю и через Вконтакте

Таск-борд пока отсутствует.

### back

Проект основан на архетипе webapp.
Слои:

* configuration - конфигурационные классы, в т.ч. Spring Security, инструменты аутентификации.
* controllers - обычные и rest-контроллеры приложения.
* dto - специальные сущности для передачи/получения данных в/с API.
* entity - сущности базы данных.
* enums - блок вспомогательных перечислений
* exception - все что касается исключительных ситуаций, в том числе логирование
* repository - dao-слой приложения, реализуем в виде интерфейсов Spring Data, имплементирующих JpaRepository.
* security - CustomAuthentication - для авторизации через Вконтакте и CustomUserDetails
* service - бизнес-логика приложения, реализуем в виде интерфейсов и имплементирующих их классов.
* util - пакет для утилит - классов: валидаторов, шаблонов, конверторов и т.д.


### front
Фронтенд адо кого-то просить написать на JS

### done

* Реализованна аутентификация через Вконтакте.
* Сущности заполнены на 95% (осталось определиться с полями сущности event).
* Есть конверторы и DTO.
* Реализованно debug логирование, через аспектное программирование.
* Написаны Service слои для всех сущностей.
* REST контроллеры есть, к ним только секюрность дописать.
* MVC контроллеры и представление для управления пользователями (админка) реализованна.
* Реализовано первичное заполнение БД вспомогательной информацией.
