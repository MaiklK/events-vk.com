# Events-Vkontakte

Мероприятия вконтакте

http://localhost:8085/swagger-ui.html

<h2>Описание проекта "Мероприятия вконтакте"</h2>
<h1>ВАЖНО!</h1>
Первичный запуск приложения занимает около 30 минут, заполняется БД 

- [Про что проект (кратко)](#summary)
- [Про что проект (что бы понятно)](#summary-long)
- [Stack](#stack)
- [Backlog](#backlog)
  - [Структура проекта](#project-structure)
    - [фронт](#front)
    - [Бэкенд](#back)
- [Что уже реализованно](#done)


### Summary

Проект собирает и хранит, мероприятия вконтакте в базе.


### summary-long

Что такое [мероприятия вконтакте](https://postium.ru/kak-sozdat-i-oformit-meropriyatie-vkontakte/)?
В чем проблема, есть же поиск?

* поиск мероприятий можно осуществить, только по городу и ключу, [пример](https://vk.com/groups?act=catalog&c%5Bcity%5D=1&c%5Bnot_safe%5D=1&c%5Bper_page%5D=40&c%5Bsection%5D=communities&c%5Bskip_catalog%5D=1&c%5Btype%5D=3).
* найти мероприятие на определенную дату тот еще геморрой.
* за раз можно забрать не больше 1000 мероприятий и сдвиг(offset) не работает.

Пару лет назад мне, это было критично и я написал скрипт на Python вот [результат](https://vk.com/all_event_vk_msk).

Так в чем же идея проекта? Возможность получать мероприятия городу и по ДАТЕ. 
Какие еще есть проблемы:

* куча клонов мероприятий
* ограничения API VK их много, но есть идея решения авторизация пользователей через вк и получение access_token.

Какие будут блоки:

* админка - управление пользователями. - работает, фронт надо переводить на JS
* модуль сбора мероприятий в базу.
* модуль инициализации - заполнение базы данных странами и городами вконтакте. - готов
* модуль постинга мероприятий вконтакте в группы вконтакте.
* фронт, админка и выборка мероприятий.
 кстати по ходу дела нашел кривую [реализацию](https://vkevent.ru).

### Stack

Проект пишется на базе `Java 17`, `Spring Boot`, `Maven` пока на архитектуре WEBMVC в планах переехать на REST архитектуру и JS для фронта.
Совсем в далеких планах перевести проект на микросервисную архитектуру.

Чтобы не писать boilerplate-код, на проекте используется [Lombok](https://projectlombok.org/features/all).

Все контроллеры и их методы нужно сразу описывать аннотациями [Swagger](https://docs.swagger.io/swagger-core/v1.5.0/apidocs/allclasses-noframe.html).
Swagger UI при запущенном приложении крутится [здесь](http://localhost:8085/swagger-ui.html).

<ul>
<li>FlyWay - Первоначальное заполнение БД</li>
<li>Docker - Окружение</li>
<li>Actuator - End points живости приложения</li>
<li>Swagger UI - Документация и мгновенное тестирование контроллеров</li>
<li>Postgres - ДБ</li>
<li>Prometheus - Метрики</li>
<li>SDK Api Vk - библиотека для работы с API Вконтакте</li>
<li>Grafana - Рисует из метрик красивые графики</li>
<li>Spring Data JPA - для общения с базой</li>
<li>Lombok - Сокращение boilerplate-кода</li>
<li>Spring Security - Аутентификация по логину, паролю и через Вконтакте</li>
</ul>
Таск-борд пока отсутствует.

### Backlog

Инструменты пока отсутствуют:

<ul>
<li>логирование через Slf4j + log4j2</li>
<li>юнит-тесты и интеграционные тесты</li>
</ul>


### project-structure

### back

Проект основан на архетипе webapp.
Слои:
<ul>
<li><code>config</code> конфигурационные классы, в т.ч. Spring Security, инструменты аутентификации</li>
<li><code>entity</code> сущности базы данных</li>
<li><code>dto</code> специальные сущности для передачи/получения данных в/с апи</li>
<li><code>repository</code> dao-слой приложения, реализуем в виде интерфейсов Spring Data, имплементирующих JpaRepository.</li>
<li><code>service</code> бизнес-логика приложения, реализуем в виде интерфейсов и имплементирующих их классов.</li>
<li><code>controller</code> обычные и rest-контроллеры приложения.</li>
<li><code>util</code> пакет для утилитных классов: валидаторов, шаблонов, хэндлеров, эксепшнов.</li>
</ul>

### front
Фронтенд пока ХЗ чего с ним делать.

### done

<ul>
<li>Реализованна аутентификация через Вконтакте.</li>
<li>Сущности заполнены на 95% (осталось определиться с полями сущности event).</li>
<li>Есть конверторы и DTO.</li>
<li>Реализованно debug логирование, через аспектное программирование.</li>
<li>Написаны Service слои для всех сущностей.</li>
<li>REST контроллеры есть, к ним только секюрность дописать.</li>
<li>MVC контроллеры и представление для управления пользователями (админка) реализованна.</li>
<li>Реализовано первичное заполнение БД вспомогательной информацией.</li>
</ul>
